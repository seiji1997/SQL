
# SQL テスト問題

## 問題2

以下のSQL文を使用して `items` テーブルの全ての `price` を10％割引してください。

```sql
UPDATE items
SET
  price = trunc(price * 0.9);
```

## 解説

### SQL文の読み解き方と考え方

この問題では、`items` テーブルのすべての商品の `price`（価格）を10％割引する必要があります。割引後の価格は小数点以下を切り捨てる（`trunc`関数を使用）必要があります。

### 各処理についての丁寧な解説

#### 価格の更新処理

`UPDATE` 文は、テーブル内の既存のレコードを変更するために使用されます。今回のケースでは、すべてのレコードに対して `price` を更新します。

```sql
UPDATE items
SET
  price = trunc(price * 0.9);
```

- `UPDATE items`: `items` テーブル内のデータを更新することを指定しています。
- `SET price = trunc(price * 0.9)`: `price` カラムの値を更新します。`price` に0.9を掛け、その結果の小数点以下を切り捨てます。

この操作により、すべての商品価格が10％割引され、小数点以下が切り捨てられます。

### 効率的な短いコードでの回答作成

この `UPDATE` 文は簡潔で効率的です。1つの SQL 文で全ての `price` を更新できます。

### 入出力の例

例えば、以下のようなテーブルがあるとします。

| id | category_id | name | price |
|----|-------------|------|-------|
| 1  | 1           | 鮪   | 1000  |
| 2  | 1           | 鯛   | 800   |

ここに以下のSQL文を実行します。

```sql
UPDATE items
SET
  price = trunc(price * 0.9);
```

実行後、`items` テーブルは次のようになります。

| id | category_id | name | price |
|----|-------------|------|-------|
| 1  | 1           | 鮪   | 900   |
| 2  | 1           | 鯛   | 720   |

これで、テーブルの価格が10％割引され、小数点以下が切り捨てられていることが確認できます。

---

このように、SQL文の実行結果やテーブルの変化を具体的に示すことで、理解が深まります。効率的な方法を採用することで、実際のデータベース操作のパフォーマンスも向上します。
